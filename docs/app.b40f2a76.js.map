{"version":3,"sources":["js/keys.js","js/app.js"],"names":["milKey","cleanAPIData","allCleanAPIData","load","news","fetchThings","url","rawResponse","fetch","ok","Error","jsonResponse","json","obj","console","log","articles","forEach","element","title","thumbnail","urlToImage","author","selftext","ups","publishedAt","push","data","children","err","alert","printLoad","artCont","document","querySelectorAll","i","length","addEventListener","popNewUp","renderRows","article","createElement","innerHTML","getElementById","appendChild","querySelector","classList","remove","add","innerText","urlChange","newUrl","main","urlNew1","onclick","urlNew2","urlNew3","urlNew4","logo","searchFind","toggle","e","main2","key","value","toLowerCase","el","indexOf","style","display","artCont2"],"mappings":"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","file":"app.b40f2a76.js","sourceRoot":"..","sourcesContent":["export const milKey = '214b0c558498448797163c59349a0165';","\"use strict\";\n\nimport { milKey } from './keys.js';\nlet cleanAPIData = [];\nlet allCleanAPIData = [];\n\n\nlet load = function(news) {\n\n  fetchThings(url, news);\n  };\n\n// Async Await Method\nlet url = 'https://www.reddit.com/r/LosAngeles/top.json';\n\nconst fetchThings = async (url, news) => {\n  //let dataArray = [];\n  try {\n    // fetch the raw response\n    const rawResponse = await fetch(url);\n\n    if (!rawResponse.ok) {\n      throw new Error(rawResponse);\n    }\n\n    // parse response into json\n    const jsonResponse = await rawResponse.json();\n    //console.log(jsonResponse);\n    let obj = [];\n    // now we can do whatever we want with jsonResponse\n    // add elements to DOM, make more requests, etc.\n    // condition for diffrent Api url\n    if (news){\n      console.log('new',jsonResponse);\n      jsonResponse.articles.forEach(function(element) {\n      \n        obj = {\n          title: element.title,\n          thumbnail: element.urlToImage,\n          url: element.url,\n          author: element.author,\n          selftext: element.selftext,\n          ups: element.publishedAt\n        };\n        cleanAPIData.push(obj);\n\n        allCleanAPIData.push(obj);\n        //renderRows(element);\n      });\n    } else {\n      console.log(jsonResponse.data.children);\n      jsonResponse.data.children.forEach(function(element) {\n        \n         obj = {\n          title: element.data.title,\n          thumbnail: element.data.thumbnail,\n          url: element.data.url,\n          author: element.data.author,\n          selftext: element.data.selftext,\n          ups: element.data.ups\n        };\n        cleanAPIData.push(obj);\n\n        allCleanAPIData.push(obj);\n        //renderRows(element.data);\n      });\n    }\n  } catch (err) {\n    /// Error API is not working!\n    console.log('err', err);\n    alert(\"API is not working!\");\n  }\n  printLoad();\n  // current location of Poupup \n  let artCont =  document.querySelectorAll(\".articleContent a\");\n  //console.log(artCont.length);\n  for (let i= 0; i< artCont.length; i++){\n\n    artCont[i].addEventListener(\"click\", function(){\n\n      popNewUp(cleanAPIData[i]);\n      console.log(`data array: ${cleanAPIData[i].title}`);\n\n    });\n  }\n  // let artCont2 =  document.querySelectorAll(\"#main2 .articleContent a\");\n  // //console.log(artCont2.length);\n  // for (let i= 0; i< artCont2.length; i++){\n  //   console.log('search popup workssssssssssssssssss');\n  //   artCont2[i].addEventListener(\"click\", function(){\n\n  //     popNewUp(cleanAPIData[i]);\n  //     //console.log(`data array: ${dataArray[i]}`);\n\n  //   });\n  // }\n};\n/// default load\nload();\nfunction printLoad(){\ncleanAPIData.forEach(renderRows);};\n\n/// build article\nfunction renderRows(element) {\n  // default picture\n let article = document.createElement('article');\nif (element.thumbnail === \"self\" || element.thumbnail === \"default\"){\nelement.thumbnail = \"images/article_placeholder_1.jpg\";\n};\n  article.innerHTML = `\n    <article class=\"article\">\n      <section class=\"featuredImage\">\n        <img src=\"${element.thumbnail}\" alt=\"\" />\n      </section>\n      <section class=\"articleContent\">\n          <a href=\"#\"><h3>${element.title}</h3></a>\n          <h6>Lifestyle - ${element.author}</h6>\n      </section>\n      <section class=\"impressions\">\n      ${element.ups}\n      </section>\n      <div class=\"clearfix\"></div>\n    </article>\n  `;\n  document.getElementById('main').appendChild(article);\n\n/// Remove loader and add hidden classes for new url\n  document.querySelector(\"#popUp\").classList.remove(\"loader\");\n  document.querySelector(\"#popUp\").classList.add(\"hidden\");\n}\n\n// PopUp function\nlet popNewUp = function (element){\n  console.log('popup works');\nconsole.log(element.title);\n  document.querySelector(\"#popUp\").classList.remove(\"hidden\",\"loader\");\n  //console.log(element);     \n  //console.log(this.textContent);\n\n    document.querySelector('#popUp').innerText = ``;\n    document.querySelector('#popUp').innerHTML =\n      `<a href=\"#\" class=\"closePopUp\">X</a>\n           <div class=\"container\">\n              <h1>${element.title}</h1>\n              <p>${element.selftext || \"There is no description for this article.\"}</p>\n            <a href=\"${element.url}\" class=\"popUpAction\" target=\"_blank\">Read more from source</a>\n          </div>`\n    ;\n  ////  close PopUP\n  document.querySelector(\".closePopUp\").addEventListener(\"click\",function () {\n    console.log('popup close');\n    document.querySelector(\"#popUp\").classList.add( \"loader\", \"hidden\");\n  });\n};\n\n\n/// Navbar function -----------------------------------------------\nlet urlChange = function(newUrl, news){\n  // load new url\n  document.querySelector(\"#popUp\").classList.remove(\"hidden\");\n  document.querySelector(\"#popUp\").classList.add(\"loader\");\n  //console.log('work url2');\n  cleanAPIData = [];\n  url = newUrl;\n  // remove and refresh the page\n  main.innerHTML = ``;\n  load(news);\n};\n\n// First news\nlet urlNew1 = document.getElementById('url1');\nurlNew1.onclick = function(){\n  let url = 'https://www.reddit.com/r/LosAngeles/top.json';\n  urlChange(url);\n};\n\n// Second news\nlet urlNew2 = document.getElementById('url2');\nurlNew2.onclick = function(){\n  let url = 'https://www.reddit.com/r/vancouver/top.json';\n  urlChange(url);\n};\n\n// Third news\nlet urlNew3 = document.getElementById('url3');\nurlNew3.onclick = function(){\n  let url = 'https://www.reddit.com/r/Toronto/top.json';\n  urlChange(url);\n};\n// Fourth news\nlet urlNew4 = document.getElementById('url4');\nurlNew4.onclick = function(){\n  //let url = 'https://newsapi.org/v2/top-headlines?country=us&apiKey=214b0c558498448797163c59349a0165';\n\n  let url = `https://newsapi.org/v2/top-headlines?country=us&apiKey=${process.env.milKey}`;\n  urlChange(url, \"news\");\n  //Sconsole.log(url);\n};\n// logo\nlet logo = document.getElementById('logo');\nlogo.onclick = function(){\n  let url = 'https://www.reddit.com/r/LosAngeles/top.json';\n  urlChange(url);\n};\n\n/// Search\ndocument.querySelector('#search a').addEventListener('click', function(){\n  console.log(cleanAPIData);\n  \n  document.querySelector('#search').classList.toggle('active');\n  document.querySelector('#input').addEventListener('keypress', function(e){\n  main2.innerHTML = ``;\n  if (e.key === 'Enter') {  \n  console.log('search works');\n  let value = document.querySelector('#input').value.toLowerCase();\n  //console.log(value);\n  cleanAPIData.forEach(el => {\n      //console.log(el);\n    if(el.title.toLowerCase().indexOf(value) != -1){\n      //console.log(el.title)\n      // hide main \n      document.querySelector('#main').style.display = \"none\";\n      searchFind(el);\n      \n      }\n    });\n///////////////////////////////////////////////////////////////////////////\n    ////Pouup main22222222222222222\n    let artCont2 =  document.querySelectorAll(\"#main2 .articleContent a\");\n    //console.log(artCont2.length);\n    for (let i= 0; i< artCont2.length; i++){\n      console.log('search popup workssssssssssssssssss');\n      console.log(cleanAPIData[i]);\n\n      artCont2[i].addEventListener(\"click\", function(){\n  \n        popNewUp(cleanAPIData[i]);\n        console.log(cleanAPIData[i]);\n        //console.log(`data array: ${dataArray[i]}`);\n  \n      });\n    }\n  }});\n  \n  document.querySelector('#input').value= '';\n  document.querySelector('#main').style.display = \"block\";\n});\n\n\nfunction searchFind(element) {\n  //contentToDom(element);\n  let article = document.createElement('article');\n\n  if (element.thumbnail === \"self\" || element.thumbnail === \"default\"){\n    element.thumbnail = \"images/article_placeholder_1.jpg\";\n    };\n      article.innerHTML = `\n    \n    \n        <article class=\"article\" >\n          <section class=\"featuredImage\">\n            <img src=\"${element.thumbnail}\" alt=\"\" />\n          </section>\n          <section class=\"articleContent\">\n              <a href=\"#\"><h3>${element.title}</h3></a>\n              <h6>Lifestyle - ${element.author}</h6>\n          </section>\n          <section class=\"impressions\">\n          ${element.ups}\n          </section>\n          <div class=\"clearfix\"></div>\n        </article>\n      `;\n    \n  document.getElementById('main2').appendChild(article);\n\n/// Remove loader and add hidden classes for new url\n  document.querySelector(\"#popUp\").classList.remove(\"loader\");\n  document.querySelector(\"#popUp\").classList.add(\"hidden\");\n  \n}\n"]}